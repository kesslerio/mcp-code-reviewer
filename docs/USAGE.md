# Vibe Check MCP Usage Guide

Complete guide for using Vibe Check MCP with Claude Code CLI for anti-pattern detection and prevention.

## Quick Start

Once you have Vibe Check MCP configured (see [README.md](../README.md)), you can analyze GitHub issues using natural language commands.

## Command Line Interface

### Direct CLI Usage

Set up a shell alias for natural command syntax:

```bash
# Add to your ~/.bashrc, ~/.zshrc, or ~/.fish_config
alias vibe='python -m vibe_check.cli'

# Now you can use:
vibe check issue 31
deep vibe issue 31
vibe check issue 31 in microsoft/typescript
```

### Natural Language Commands

**Quick Analysis**:
```bash
vibe check issue 31
vibe check issue 42 in facebook/react
```

**Deep Analysis** (comprehensive mode with educational content):
```bash
deep vibe issue 31
deep vibe issue 42 in microsoft/typescript
```

## GitHub Issue Analysis

The core functionality of Vibe Check MCP is GitHub issue analysis with dual-mode operation.

### Basic Usage

**Simple Analysis** (defaults to quick mode):
```
analyze issue 23
vibe check issue 23
```

**Deep Analysis** (comprehensive mode with automatic GitHub comments):
```
deep vibe issue 23
analyze issue 23 comprehensively
do a deep vibe check on issue 23
```

### Advanced Usage

**Cross-Repository Analysis**:
```
analyze issue 42 in microsoft/typescript
check issue 156 in facebook/react for anti-patterns
```

**Detail Level Control**:
```
analyze issue 23 with brief details
analyze issue 23 with comprehensive educational content
do a detailed analysis of issue 23
```

**GitHub Integration Control**:
```
analyze issue 23 comprehensively but don't post a comment
analyze issue 23 in comprehensive mode without GitHub integration
```

## Natural Language Prompting

Vibe Check MCP responds to natural language. Here are various ways to trigger analysis:

### Quick Analysis Triggers
- "vibe check issue 23"
- "analyze issue 23"
- "check issue 23 for patterns"  
- "quick review of issue 23"
- "scan issue 23"

### Deep Analysis Triggers (Comprehensive Mode)
- "deep vibe issue 23"
- "analyze issue 23 comprehensively"
- "do a deep vibe check on issue 23"
- "thoroughly analyze issue 23"
- "systematic deep review of issue 23"

### Repository Specification
- "vibe check issue 23 in owner/repo"
- "deep vibe issue 23 in microsoft/typescript"  
- "vibe check issue 42 in facebook/react"

### Educational Content Control
- "analyze issue 23 with brief explanations"
- "analyze issue 23 with detailed educational content"
- "analyze issue 23 with comprehensive learning materials"

## Understanding the Output

### Quick Mode Output
```json
{
  "analysis_mode": "quick",
  "issue_title": "Add custom HTTP client for Stripe integration", 
  "patterns_detected": 1,
  "anti_patterns": [
    {
      "type": "infrastructure_without_implementation",
      "confidence": 0.85,
      "evidence": "Custom HTTP client mentioned, No SDK research documented"
    }
  ],
  "status": "patterns_detected",
  "recommendation": "Review detected patterns before implementation"
}
```

### Comprehensive Mode Output
```json
{
  "analysis_mode": "comprehensive",
  "issue_number": 23,
  "patterns_detected": 1,
  "anti_patterns": [
    {
      "type": "infrastructure_without_implementation",
      "confidence": 0.85,
      "evidence": "Custom HTTP client mentioned, No SDK research documented",
      "educational_content": {
        "why_problematic": "Building custom solutions before testing standard APIs leads to 2+ years of technical debt...",
        "prevention_checklist": ["Research official SDK", "Test basic integration", "Document why standard approach insufficient"]
      }
    }
  ],
  "risk_assessment": {
    "third_party_integration": true,
    "infrastructure_complexity": false,
    "overall_risk": "medium"
  },
  "recommendations": {
    "overall": "‚ö†Ô∏è Review required before implementation",
    "specific_actions": [
      "üîç API-First Validation Required: Demonstrate basic API functionality with working POC before architectural planning"
    ]
  }
}
```

## GitHub Integration

### Automatic Comment Posting

When you use **comprehensive mode**, Vibe Check automatically posts a formatted analysis comment to the GitHub issue (if patterns are detected).

**Comment Format**:
```markdown
## üîç Vibe Check Anti-Pattern Analysis

üü° **Risk Level**: Medium

### üìä Analysis Summary
- **Patterns Detected**: 1
- **Third-Party Integration Risk**: ‚ö†Ô∏è Yes
- **Infrastructure Complexity Risk**: ‚úÖ No

### üö® Detected Anti-Patterns

**1. infrastructure_without_implementation** (Confidence: 0.85)
- Evidence: Custom HTTP client mentioned, No SDK research documented

### üéØ Recommendations

‚ö†Ô∏è Review required before implementation

- üîç API-First Validation Required: Demonstrate basic API functionality with working POC before architectural planning

---
*Analysis generated by Vibe Check MCP ‚Ä¢ [Learn more about anti-patterns](https://github.com/kesslerio/vibe-check-mcp)*
```

### Issue Labeling

Comprehensive analysis automatically adds the `anti-pattern-review` label to issues with detected patterns.

## Best Practices

### When to Use Quick Mode
- **Development workflow**: Fast feedback during planning
- **Issue triage**: Quick scanning of multiple issues
- **No GitHub modification needed**: When you don't want to post comments

### When to Use Comprehensive Mode  
- **Formal reviews**: When you want documented analysis
- **Team communication**: Share findings with team members
- **Anti-pattern education**: When you want full educational content
- **Issue documentation**: Permanent record of analysis

### Repository Context

If you're working within a repository, Vibe Check will default to analyzing issues in that repository:

```bash
# In /path/to/my-project
cd /path/to/my-project
claude -p "analyze issue 23"  # Analyzes issue 23 in current repo
```

For cross-repository analysis, always specify the repository:
```
analyze issue 23 in microsoft/typescript
```

## Ensuring Tool Selection

### When Vibe Check Isn't Selected Automatically

Sometimes Claude may not automatically choose the Vibe Check tool for analysis. Here's how to ensure it gets used:

**Explicit Tool References**:
```
use Vibe Check to analyze issue 35
analyze issue 35 with Vibe Check
Vibe Check: check issue 35 for anti-patterns
```

**Anti-Pattern Keywords** (triggers tool selection):
```
analyze issue 35 for anti-patterns
check issue 35 for patterns
scan issue 35 for engineering anti-patterns
anti-pattern analysis of issue 35
```

**Specific Mode Requests**:
```
run comprehensive anti-pattern analysis on issue 35
do a quick vibe check on issue 35  
systematic pattern analysis of issue 35
```

> **üìù Note**: "Vibe check" phrasing works well and may become the official tool name ([see Issue #39](https://github.com/kesslerio/vibe-check-mcp/issues/39)).

### Tool Selection Debugging

**Check Available Tools**:
```
what MCP tools are available?
list Vibe Check capabilities
show me the Vibe Check server status
```

**Verify Tool Registration**:
If Vibe Check isn't available, check your MCP configuration:
```bash
claude mcp list | grep vibe
```

**Force Tool Usage**:
When Claude uses other tools instead, explicitly request:
```
instead, use the Vibe Check analyze_github_issue tool
please use vibe-check:analyze_github_issue for this
```

## Troubleshooting

### Common Issues

**"Vibe Check tool not found"**:
- Check MCP server registration: `claude mcp list`
- Verify server is running: `claude mcp status vibe-check`
- Re-add server if needed (see [README.md](../README.md))

**"Failed to fetch issue"**:
- Check that the issue number exists
- Verify repository name format (owner/repo)
- Ensure GitHub CLI (`gh`) is authenticated

**"GitHub comment posting failed"**:
- Verify you have write access to the repository
- Check that GitHub token is properly configured
- Ensure GitHub CLI is authenticated with sufficient permissions

**"No patterns detected"**:
- This is actually good! It means no anti-patterns were found
- Try comprehensive mode for more detailed analysis
- Check that the issue content contains sufficient detail

**"Claude doesn't use Vibe Check automatically"**:
- Use more specific language (see "Ensuring Tool Selection" above)
- Include "anti-pattern" or "Vibe Check" in your prompt
- Be explicit: "use Vibe Check to analyze..."

### Authentication Setup

Ensure GitHub CLI is properly authenticated:
```bash
gh auth status
gh auth login  # If not authenticated
```

## Advanced Features

### Pattern-Specific Analysis
```
analyze issue 23 focusing on infrastructure patterns
check issue 23 for complexity escalation
scan issue 23 for documentation neglect patterns
```

### Educational Mode
```
explain the infrastructure-without-implementation pattern
teach me about complexity escalation  
what are the main anti-patterns to avoid?
```

## Upcoming Features

The following tools are planned for Phase 2 expansion:

- **PR Review**: `review pull request 42`
- **Code Analysis**: `analyze this code for patterns`
- **Integration Validation**: `validate Stripe integration approach`
- **Engineering Plan Review**: `review engineering plan docs/plan.md`
- **PRD Review**: `review PRD docs/requirements.md`

## Getting Help

- **Server Status**: Ask "what's the Vibe Check server status?"
- **Available Tools**: Ask "what can Vibe Check do?"
- **Pattern Information**: Ask "explain [pattern-name] pattern"

For more help, see:
- [Installation Guide](../README.md)
- [Technical Implementation](Technical_Implementation_Guide.md)
- [Product Requirements](Product_Requirements_Document.md)